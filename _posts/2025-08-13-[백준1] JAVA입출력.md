---
layout: post
title: JAVA입출력
subtitle: ByteStream은 어떻게 처리하는가에 대하여
categories: JAVA
tags: [JAVA, Baekjoon]
---


자바의 입출력은 바이트스트림(byte stream) 단위로 데이터를 읽고 쓴다.
이 방식은 운영체제에 종속되지 않아 OS가 달라도 동일하게 동작하며, DB나 네트워크 통신에서도 안정적인 호환성을 제공한다.
예를 들어 서버가 리눅스, 클라이언트가 윈도우여도 바이트 단위 데이터는 변형 없이 그대로 주고받을 수 있고, 필요한 시점에만 인코딩·디코딩을 적용하면 된다.


## 입력 흐름
### : System.in → InputStreamReader → BufferedReader
콘솔 입력의 기본 구조는 이렇게 진행된다.

![banner](/assets/images/0813/0813-1.png)

1. System.in
표준 입력 스트림. 타입은 InputStream이며 바이트 단위로만 읽을 수 있다.
이 상태로는 멀티바이트 문자를 안정적으로 처리하기 어렵다.

2. InputStreamReader
바이트 데이터를 문자(char)로 변환한다. 생성 시 인코딩을 지정하면 변환 과정에서 정확한 디코딩이 보장된다.
이 단계에서부터 문자 단위 API를 쓸 수 있고, 고수준 Reader 계열 클래스(BufferedReader, LineNumberReader 등)로 연결할 수 있다.

3. BufferedReader
문자 스트림에 버퍼(기본 8192 char)를 두어 호출 횟수를 줄이고 속도를 높인다.
readLine()을 사용하면 한 줄 전체를 공백 포함 그대로 읽어 문자열로 반환한다.
Scanner처럼 정규식 검사를 하지 않으므로 대량 입력에서 훨씬 빠르다.


## 출력
### : BufferedWriter와 StringBuilder

1. BufferedWriter
문자 출력 버퍼를 사용해 데이터를 모아뒀다가 버퍼가 차거나 flush() 호출 시 한 번에 출력한다.
메모리 부담이 적고, 중간중간 데이터를 내보내야 하는 상황에 적합하다.

2. StringBuilder
메모리 내에서 문자열을 가변적으로 누적한다. 모든 출력 내용을 메모리에 저장했다가 마지막에 한 번에 System.out.print()로 내보낸다.
출력 횟수를 최소화해 가장 빠르지만, 출력량이 매우 많으면 메모리 사용량이 늘어난다.
알고리즘 문제처럼 한 번에 출력해도 되는 경우에는 BufferedReader + StringBuilder 조합이 최속이다.



### cf) Scanner와 StringTokenizer
구분자 기반 토큰 분리로 편리하지만, 성능과 유연성 제약으로 대규모·실무 환경에서는 잘 쓰이지 않을 것으로 예상된다.

1. Scanner
구분자(delimiter)를 기준으로 입력을 토큰 단위로 읽고, nextInt(), next()처럼 타입 변환까지 해준다.
편리하지만 내부적으로 정규식 매칭을 하기 때문에 대량 입력에서 느릴 수 있다.

2. StringTokenizer
단일 문자 구분자만 지원하며, 멀티문자 구분자나 정규식은 불가능하다.
이미 메모리에 있는 문자열을 토큰으로 나누는 데만 사용되고, 유연성이 떨어져 실무 활용도는 낮다.




참고링크
- [자바입출력정리](https://st-lab.tistory.com/41)




